<div (window:keydown)="boss_key($event)" class="container editor-container" #editorContainer [@childrenAppear]="editor_exists" (window:mousemove)="show_nav_button($event)">
    <mat-card>
        <div class="editor-title-container">
            <input [(ngModel)]="title" class="editor-title" placeholder="Untitled" maxlength="50" #titleRef/>
        </div>
        <div class="dash-board">
            <button mat-raised-button color="warn" (click)="delete_article()">Delete</button>
        </div>
        <div class="category-editor">
            <mat-form-field>
                <mat-select [(ngModel)]="current_category_id" (change)="category_change($event)">
                    <mat-option *ngFor="let category of categories" [value]="category.category_id">
                        {{ category.category_name }}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <div class="divider"></div>
        <div class="page-progress" #progressBarContainer [@progressAppear]="progress_state">
            <mat-progress-bar #progressBar color="accent" mode="determinate" [value]="progress_value"> </mat-progress-bar>
        </div>
        <mat-tab-group MatTabGroup dynamicHeight="true" [selectedIndex]="tab_select" (selectedIndexChange)="select_change($event)">
            <mat-tab label="{{ article_status === 'modified' ? '●' : ''}} Editor">
                <div class="input-test" id="tab1">
                    <mat-input-container class="editor-input">
                        <textarea matInput matTextareaAutosize [(ngModel)]="content" [matAutosizeMinRows]="content_rows" #contentRef></textarea>
                    </mat-input-container>
                </div>
            </mat-tab>
            <mat-tab label="View">
                <div id="tab2">
                    <markdown [data]="content" [renderLatex]="render_latex"></markdown>
                </div>
            </mat-tab>
        </mat-tab-group>

        <button #navHome mat-fab color="primary" (click)="modify_button_move($event)" class="markdown-showup" *ngIf="true" [matTooltip]="modify_button_info()" matTooltipPosition="left">
                <mat-icon class="big-icon">{{ figure_modify_button() }}</mat-icon></button>
        <button #navAddImage mat-fab color="primary" (click)="select_file_click($event)" class="markdown-showup" *ngIf="true" matTooltip="插入图片 (ctrl + P)" matTooltipPosition="left">
                <mat-icon class="big-icon">insert_photo</mat-icon></button>
        <button #navView mat-fab color="primary" (click)="toggle_select($event)" class="markdown-showup" *ngIf="true" [matTooltip]="get_button_info()" matTooltipPosition="left">
                <mat-icon class="big-icon">{{ figure_button_name() }}</mat-icon></button>
        <button #navTop mat-fab color="primary" (click)="goto_top($event)" class="markdown-showup" *ngIf="true" matTooltip="回到顶部 (ctrl + ↑)" matTooltipPosition="left">
                <mat-icon class="big-icon">arrow_upward</mat-icon></button>

    </mat-card>
    <form class="add-image-form" action="/middle/file" method="post" enctype="multipart/form-data" #imageForm>
        <label for="image_uploads">Choose file to upload</label>
        <input type="file" id="image_uploads" name="file" multiple #imageUpload (change)="upload_file($event)" />
        <input type="submit" value="Save" (click)="upload_file($event)" />
    </form>

</div>